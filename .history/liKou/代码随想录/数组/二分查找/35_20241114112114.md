# 35.æœç´¢æ’å…¥ä½ç½®
**é¢˜ç›®æè¿°**

ç»™å®šä¸€ä¸ªæ’åºæ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œåœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå¹¶è¿”å›å…¶ç´¢å¼•ã€‚å¦‚æœç›®æ ‡å€¼ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œè¿”å›å®ƒå°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®ã€‚ä½ å¯ä»¥å‡è®¾æ•°ç»„ä¸­æ— é‡å¤å…ƒç´ ã€‚

ç¤ºä¾‹ 1:

> è¾“å…¥: [1,3,5,6], 5
> 
> è¾“å‡º: 2

ç¤ºä¾‹ 2:

> è¾“å…¥: [1,3,5,6], 2
> 
> è¾“å‡º: 1

ç¤ºä¾‹ 3:

> è¾“å…¥: [1,3,5,6], 7
> 
> è¾“å‡º: 4

ç¤ºä¾‹ 4:

> è¾“å…¥: [1,3,5,6], 0
> 
> è¾“å‡º: 0



## é¦–æ¬¡è§£ç­”

ğŸ‰é€šè¿‡ğŸ‰  

```c

int searchInsert(int* nums, int numsSize, int target) {
    int left = 0;
    int right = numsSize - 1;
    // ä½¿ç”¨äºŒåˆ†æ³•æŸ¥æ‰¾å…ƒç´ 
    while(right >= left) {
        int mid = (right + left) / 2;
        if (target > nums[mid]) {
            left = mid + 1;
        } else if (target < nums[mid]) {
            right = mid - 1;
        } else {
            return mid;
        }
    }
    // äºŒåˆ†æ³•æŸ¥æ‰¾å¤±è´¥æ—¶leftæŒ‡å‘è¯¥å…ƒç´ éœ€è¦æ’å…¥çš„ä½ç½®
    return left;
}

```

**æ€è·¯**

ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾åœ¨æ•°ç»„ä¸­æŸ¥æ‰¾ç›®æ ‡å€¼ï¼Œé’ˆå¯¹æŸ¥æ‰¾ä¸åˆ°çš„æƒ…å†µæ ¹æ®`right`å’Œ`left`çš„ä½ç½®æƒ…å†µç¡®å®šè¦æ’å…¥çš„ä½ç½®è¿”å›


**æ€»ç»“**

1. å®šä¹‰å¥½åŒºé—´åï¼Œä½¿ç”¨`while(right >= left)`ï¼Œå½“`right < left`æ—¶ï¼Œå³æŸ¥æ‰¾å¤±è´¥ï¼Œè¿”å›`left`æŒ‡å‘çš„ä½ç½®

## å­¦ä¹ é¢˜è§£åè§£ç­”

```c

int searchInsert(int* nums, int numsSize, int target) {
    int left = 0;
    int right = numsSize - 1;
    int ans = numsSize;
    // ä½¿ç”¨äºŒåˆ†æ³•æŸ¥æ‰¾å…ƒç´ 
    while(right >= left) {
        int mid = (right + left) / 2;
        if (target > nums[mid]) {
            left = mid + 1;
        } else if (target <= nums[mid]) {       // å°†ç­‰äºçš„æƒ…å†µå’Œå°äºçš„æƒ…å†µåˆå¹¶
            // è®°å½•å°äºç­‰äºtargetå…ƒç´ çš„ä¸‹æ ‡ï¼Œè‹¥æ‰¾åˆ°åˆ™æ˜¯ç­‰äºtargetï¼Œè‹¥æ‰¾ä¸åˆ°åˆ™æ˜¯å°äºtargetå…ƒç´ çš„ç¬¬ä¸€ä¸ªä¸‹æ ‡
            ans = mid;
            right = mid - 1;
        }
    }
    // äºŒåˆ†æ³•æŸ¥æ‰¾å¤±è´¥æ—¶leftæŒ‡å‘è¯¥å…ƒç´ éœ€è¦æ’å…¥çš„ä½ç½®
    return ans;
}

```

**æ€»ç»“**

1. åœ¨äºŒåˆ†æŸ¥æ‰¾ä¸­ï¼Œå½“targetæ¯”nums[mid]å°æ—¶ï¼Œmidä½ç½®æ—¢æ˜¯æ½œåœ¨çš„targetæ’å…¥ä½ç½®ï¼Œå› æ­¤å¯ä»¥å°†ç­‰äºæƒ…å†µå’Œå°äºæƒ…å†µåˆå¹¶ï¼Œè®°å½•æ¯æ¬¡çš„midä½œä¸ºç­”æ¡ˆ


## é¢˜è§£

```c++

class Solution {
    public int searchInsert(int[] nums, int target) {
        int n = nums.length;
        int left = 0, right = n - 1, ans = n;
        while (left <= right) {
            int mid = ((right - left) >> 1) + left;
            if (target <= nums[mid]) {
                ans = mid;
                right = mid - 1;
            } else {
                left = mid + 1;
            }
        }
        return ans;
    }
}

```

**æ€»ç»“**

è¿”å›çš„ç›®æ ‡å€¼å­˜åœ¨å››ç§æƒ…å†µ

![ç›®æ ‡å€¼å››ç§æƒ…å†µ](D:\ä¹±ä¸ƒå…«ç³Ÿ\mdå›¾ç‰‡\1731549610290.jpg)

å› æ­¤å¯ä»¥ç›´æ¥æš´åŠ›æœç´¢è¿”å›ç›®æ ‡å€¼

```c++

class Solution {
public:
    int searchInsert(vector<int>& nums, int target) {
        for (int i = 0; i < nums.size(); i++) {
        // åˆ†åˆ«å¤„ç†å¦‚ä¸‹ä¸‰ç§æƒ…å†µ
        // ç›®æ ‡å€¼åœ¨æ•°ç»„æ‰€æœ‰å…ƒç´ ä¹‹å‰
        // ç›®æ ‡å€¼ç­‰äºæ•°ç»„ä¸­æŸä¸€ä¸ªå…ƒç´ 
        // ç›®æ ‡å€¼æ’å…¥æ•°ç»„ä¸­çš„ä½ç½®
            if (nums[i] >= target) { // ä¸€æ—¦å‘ç°å¤§äºæˆ–è€…ç­‰äºtargetçš„num[i]ï¼Œé‚£ä¹ˆiå°±æ˜¯æˆ‘ä»¬è¦çš„ç»“æœ
                return i;
            }
        }
        // ç›®æ ‡å€¼åœ¨æ•°ç»„æ‰€æœ‰å…ƒç´ ä¹‹åçš„æƒ…å†µ
        return nums.size(); // å¦‚æœtargetæ˜¯æœ€å¤§çš„ï¼Œæˆ–è€… numsä¸ºç©ºï¼Œåˆ™è¿”å›numsçš„é•¿åº¦
    }
};

```

åŸºäºé¢˜ç›®è¦æ±‚O(logn)çš„å¤æ‚åº¦ï¼Œæ­¤å¤–æ•°ç»„æ˜¯æœ‰åºå¹¶ä¸”æ— é‡å¤å…ƒç´ çš„ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼ŒäºŒåˆ†æŸ¥æ‰¾åˆå¯ä»¥åˆ†ä¸ºå·¦é—­å³é—­[right, left]ï¼Œå·¦é—­å³å¼€[right, left)ï¼Œæ ¹æ®åŒºé—´å®šä¹‰çš„ä¸åŒï¼Œä»£ç çš„å†™æ³•ä¹Ÿä¸åŒ

æœ¬è´¨è¿˜æ˜¯åœ¨å¤„ç†ç›®æ ‡å€¼çš„å››ç§æƒ…å†µ


```c++

// ç‰ˆæœ¬ä¸€ï¼šå·¦é—­å³é—­
class Solution {
public:
    int searchInsert(vector<int>& nums, int target) {
        int n = nums.size();
        int left = 0;
        int right = n - 1; // å®šä¹‰targetåœ¨å·¦é—­å³é—­çš„åŒºé—´é‡Œï¼Œ[left, right]
        while (left <= right) { // å½“left==rightï¼ŒåŒºé—´[left, right]ä¾ç„¶æœ‰æ•ˆ
            int middle = left + ((right - left) / 2);// é˜²æ­¢æº¢å‡º ç­‰åŒäº(left + right)/2
            if (nums[middle] > target) {
                right = middle - 1; // target åœ¨å·¦åŒºé—´ï¼Œæ‰€ä»¥[left, middle - 1]
            } else if (nums[middle] < target) {
                left = middle + 1; // target åœ¨å³åŒºé—´ï¼Œæ‰€ä»¥[middle + 1, right]
            } else { // nums[middle] == target
                return middle;
            }
        }
        // åˆ†åˆ«å¤„ç†å¦‚ä¸‹å››ç§æƒ…å†µ
        // ç›®æ ‡å€¼åœ¨æ•°ç»„æ‰€æœ‰å…ƒç´ ä¹‹å‰  [0, -1]
        // ç›®æ ‡å€¼ç­‰äºæ•°ç»„ä¸­æŸä¸€ä¸ªå…ƒç´   return middle;
        // ç›®æ ‡å€¼æ’å…¥æ•°ç»„ä¸­çš„ä½ç½® [left, right]ï¼Œreturn  right + 1
        // ç›®æ ‡å€¼åœ¨æ•°ç»„æ‰€æœ‰å…ƒç´ ä¹‹åçš„æƒ…å†µ [left, right]ï¼Œ å› ä¸ºæ˜¯å³é—­åŒºé—´ï¼Œæ‰€ä»¥ return right + 1
        return right + 1;
    }
};

```

```c++

// ç‰ˆæœ¬äºŒï¼šå·¦é—­å³å¼€
class Solution {
public:
    int searchInsert(vector<int>& nums, int target) {
        int n = nums.size();
        int left = 0;
        int right = n; // å®šä¹‰targetåœ¨å·¦é—­å³å¼€çš„åŒºé—´é‡Œï¼Œ[left, right)  target
        while (left < right) { // å› ä¸ºleft == rightçš„æ—¶å€™ï¼Œåœ¨[left, right)æ˜¯æ— æ•ˆçš„ç©ºé—´
            int middle = left + ((right - left) >> 1);
            if (nums[middle] > target) {
                right = middle; // target åœ¨å·¦åŒºé—´ï¼Œåœ¨[left, middle)ä¸­
            } else if (nums[middle] < target) {
                left = middle + 1; // target åœ¨å³åŒºé—´ï¼Œåœ¨ [middle+1, right)ä¸­
            } else { // nums[middle] == target
                return middle; // æ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼çš„æƒ…å†µï¼Œç›´æ¥è¿”å›ä¸‹æ ‡
            }
        }
        // åˆ†åˆ«å¤„ç†å¦‚ä¸‹å››ç§æƒ…å†µ
        // ç›®æ ‡å€¼åœ¨æ•°ç»„æ‰€æœ‰å…ƒç´ ä¹‹å‰ [0,0)
        // ç›®æ ‡å€¼ç­‰äºæ•°ç»„ä¸­æŸä¸€ä¸ªå…ƒç´  return middle
        // ç›®æ ‡å€¼æ’å…¥æ•°ç»„ä¸­çš„ä½ç½® [left, right) ï¼Œreturn right å³å¯
        // ç›®æ ‡å€¼åœ¨æ•°ç»„æ‰€æœ‰å…ƒç´ ä¹‹åçš„æƒ…å†µ [left, right)ï¼Œå› ä¸ºæ˜¯å³å¼€åŒºé—´ï¼Œæ‰€ä»¥ return right
        return right;
    }
};

```